function lmInput(){return{scope:{bindModel:"=ngModel"},require:"ngModel",transclude:!0,templateUrl:"/app/control/input/input-control.html",link:function(e,t,n,o){"use strict"}}}!function(){"use strict";function e(e){e.activeTab="/",e.$on("$routeChangeStart",function(t,n){n.$$route&&(e.activeTab=n.$$route.originalPath)})}function t(e,t){e.otherwise({redirectTo:"/"}),t.html5Mode(!0)}function n(e,t,n){e.$on("$routeChangeSuccess",function(){n.ga&&n.ga("send","pageview",{page:t.path()})})}function o(e){function t(t){var n,o=$(".menu-indicator"),r=$("li.active-menu").index();n=e.tabs[t.index],r>t.index?(o.removeClass("right"),o.addClass("left"),o.css({left:n.left}),o.css({right:n.right})):(o.removeClass("left"),o.addClass("right"),o.css({right:n.right}),o.css({left:n.left}))}e.$on("$routeChangeStart",function(n,o){var r=$("menu ul").width();$("menu ul li").each(function(n,o){var l=$(o).outerWidth(),i=e.tabs[n];if(i.index=n,0===n)i.left=0,i.right=r-l;else{var c=e.tabs[n-1];i.left=r-c.right,i.right=c.right-l}e.activeTab.indexOf(i.id)>-1&&t(i)})}),e.tabs=[new r("/","Все"),new r("/film","Фильмы"),new r("/serial","Сериалы"),new r("/anime","Аниме"),new r("/other","Прочее"),new r("/upload","Загрузить фильм")],e.selectTab=t}function r(e,t,n){this.id=e,this.name=t,this.selected=n}angular.module("App",["ngRoute","ngAnimate","ContentModule","ControlsModule","ContentCardModule","ItemModule","UploadModule","ProfileModule","RecentModule"]).config(t).run(e).run(n).controller("NavigationCtrl",o),e.$inject=["$rootScope"],t.$inject=["$routeProvider","$locationProvider"],n.$inject=["$rootScope","$location","$window"],o.$inject=["$scope"],r.prototype={id:"",name:"",selected:!1},angular.module("App").directive("background",function(){return function(e,t,n){var o=n.background;t.css({"background-image":"url("+o+")","background-size":"cover"})}})}(),function(){function e(e){"ngInject";e.when("/",{templateUrl:"/app/content/content.html",controller:"AllContentCtrl"}).when("/film",{templateUrl:"/app/content/content.html",controller:"FilmContentCtrl"}).when("/serial",{templateUrl:"/app/content/content.html",controller:"SerialContentCtrl"})}function t(e,t){e.content=t.findContent()}function n(e,t){e.content=t.findContent(null,"Film")}function o(e,t){e.content=t.findContent(null,"Serial")}e.$inject=["$routeProvider"],angular.module("ContentModule",["ContentServices"]).config(e).controller("AllContentCtrl",t).controller("SerialContentCtrl",o).controller("FilmContentCtrl",n),t.$inject=["$scope","ContentService"],n.$inject=["$scope","ContentService"],o.$inject=["$scope","ContentService"]}(),function(){"use strict";function e(e){"ngInject";function t(e,t){return r.query({name:e,type:t})}function n(e){var t=new r(e);return t.$save(),t}var o=this,r=e("/rest/content",{},{});return o.findContent=t,o.createContent=n,o}e.$inject=["$resource"],angular.module("ContentServices",["ngResource"]).service("ContentService",e)}(),function(){function e(e){"ngInject";e.when("/film/:content_id",{templateUrl:"/app/content-card/content-card.html",controller:"FilmCardCtrl"}).when("/serial/:content_id",{templateUrl:"/app/content-card/content-card.html",controller:"SerialCardCtrl"})}function t(){"ngInject"}function n(){"ngInject"}e.$inject=["$routeProvider"],angular.module("ContentCardModule",[]),angular.module("ContentCardModule").config(e).controller("FilmCardCtrl",t).controller("SerialCardCtrl",n)}(),function(){"use strict";angular.module("ControlsModule",["control.input-control","control.parser","control.input-chunk"])}(),function(){function e(e){"ngInject";function t(t,n,o){n.on("click",function(n){e.path("/"+angular.lowercase(t.item.type)+"/"+t.item.id),t.$apply()})}return{link:t,restrict:"E",replace:!0,scope:{item:"="},templateUrl:"/app/item/item.html"}}angular.module("ItemModule",[]).directive("contentItem",e),e.$inject=["$location"]}(),function(){"use strict";function e(e){"ngInject";e.when("/profile",{templateUrl:"/app/profile/profile.html",controller:"ProfileCtrl"})}function t(e){function t(e){return profile.perms.indexOf(e)>-1}e.profile={login:"Braidner",perms:["user:edit:profile"]},e.hasPermission=t}function n(e){"ngInject"}e.$inject=["$routeProvider"],t.$inject=["$rootScope"],n.$inject=["$scope"],angular.module("ProfileModule",[]),angular.module("ProfileModule").config(e),angular.module("ProfileModule").run(t),angular.module("ProfileModule").controller("ProfileCtrl",n)}(),function(){"use strict";function e(e){e.content=[{name:"Zootopia",poster:"http://www.kinopoisk.ru/images/film_big/775276.jpg",id:0,type:"film"},{name:"Batman v Superman: Dawn of Justice",poster:"http://www.kinopoisk.ru/images/film_big/770631.jpg",id:0,type:"film"},{name:"The Justice League Part One",poster:"http://www.kinopoisk.ru/images/film_big/424994.jpg",id:0,type:"film"},{name:"The flash",poster:"http://www.kinopoisk.ru/images/film_big/817506.jpg",id:0,type:"film"},{name:"The Justice League Part One",poster:"http://www.kinopoisk.ru/images/film_big/424994.jpg",id:0,type:"film"},{name:"Frozen",poster:"http://www.kinopoisk.ru/images/film_big/493208.jpg",id:0,type:"film"},{name:"Batman v Superman: Dawn of Justice",poster:"http://www.kinopoisk.ru/images/film_big/770631.jpg",id:0,type:"film"},{name:"Untitled Spider-Man Reboot",poster:"http://www.kinopoisk.ru/images/film_big/690593.jpg",id:0,type:"film"}]}angular.module("RecentModule",[]).controller("RecentCtrl",e),e.$inject=["$scope"],angular.module("RecentModule").directive("owlCarousel",function(){var e=function(e,t,n){var o=function(){t.owlCarousel({loop:!1,nav:!1,responsive:{1200:{items:6},992:{items:4},768:{items:3},479:{items:2}}})};e.$watchCollection(n.owlCarousel,function(){o()})};return{restrict:"A",link:e}})}(),function(){"use strict";function e(e){e.when("/upload",{templateUrl:"/app/upload/upload.html",controller:"UploadCtrl"})}function t(e,t){var n=t.get();console.log(n),t.set(null),console.log(n),n&&(e.content=n)}function n(){function e(e){n=e}function t(){return n}var n={};return{set:e,get:t}}angular.module("UploadModule",["ngResource"]),angular.module("UploadModule").config(e),angular.module("UploadModule").controller("UploadCtrl",t),angular.module("UploadModule").factory("UploadData",n),e.$inject=["$routeProvider"],t.$inject=["$scope","UploadData"]}(),angular.module("control.input-control",[]).directive("lmInput",lmInput),function(){function e(){return{scope:{bindModel:"=ngModel"},require:"ngModel",transclude:!0,templateUrl:"/app/control/input-chunk/input-chunk.html",link:function(e,t,n,o){"use strict"}}}angular.module("control.input-chunk",[]),angular.module("control.input-chunk").directive("lmInputChunk",e)}(),function(){function e(e,t,n){return{scope:{bindModel:"=ngModel"},require:"ngModel",transclude:!0,templateUrl:"/app/control/url-parser-control/url-parser-control.html",link:function(o,r,l,i){"use strict";r.find(".button").on("click",function(){t.get("/rest/kinopoisk",{params:{url:o.bindModel}}).then(function(t){t.data.url=o.bindModel,n.set(t.data),e.path("/upload")})})}}}angular.module("control.parser",[]),angular.module("ControlsModule").directive("lmUrlParser",e),e.$inject=["$location","$http","UploadData"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2wvaW5wdXQvSW5wdXRDb250cm9sLmpzIiwiQXBwTW9kdWxlLmpzIiwiY29udGVudC9Db250ZW50TW9kdWxlLmpzIiwiYWxsLm1pbi5qcyIsImNvbnRlbnQvQ29udGVudFNlcnZpY2VzLmpzIiwiY29udGVudC1jYXJkL0NvbnRlbnRDYXJkTW9kdWxlLmpzIiwiY29udHJvbC9Db250cm9sc01vZHVsZS5qcyIsIml0ZW0vSXRlbU1vZHVsZS5qcyIsInByb2ZpbGUvUHJvZmlsZU1vZHVsZS5qcyIsInJlY2VudC9SZWNlbnRNb2R1bGUuanMiLCJ1cGxvYWQvVXBsb2FkTW9kdWxlLmpzIiwiY29udHJvbC9pbnB1dC1jaHVuay9pbnB1dENodW5rLmpzIiwiY29udHJvbC91cmwtcGFyc2VyLWNvbnRyb2wvdXJsUGFyc2VyQ29udHJvbC5qcyJdLCJuYW1lcyI6WyJsbUlucHV0Iiwic2NvcGUiLCJiaW5kTW9kZWwiLCJyZXF1aXJlIiwidHJhbnNjbHVkZSIsInRlbXBsYXRlVXJsIiwibGluayIsImVsZW0iLCJhdHRyIiwibmdNb2RlbCIsIk1vbml0b3JDb25maWciLCIkcm9vdFNjb3BlIiwiYWN0aXZlVGFiIiwiJG9uIiwiZXZlbnQiLCJuZXh0IiwiJCRyb3V0ZSIsIm9yaWdpbmFsUGF0aCIsIlJvdXRlQ29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJodG1sNU1vZGUiLCJBbmFseXRpY3NDb25maWciLCIkbG9jYXRpb24iLCIkd2luZG93IiwiZ2EiLCJwYWdlIiwicGF0aCIsIk5hdmlnYXRpb25DdHJsIiwiJHNjb3BlIiwic2VsZWN0VGFiIiwidGFiIiwic2VsZWN0ZWRUYWIiLCJpbmRpY2F0b3IiLCIkIiwiaW5kZXgiLCJ0YWJzIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImNzcyIsImxlZnQiLCJyaWdodCIsImN1cnJlbnQiLCJ0b3RhbFdpZHRoIiwid2lkdGgiLCJlYWNoIiwiZWwiLCJvdXRlcldpZHRoIiwibGFzdFRhYiIsImluZGV4T2YiLCJpZCIsIlRhYiIsIm5hbWUiLCJzZWxlY3RlZCIsInRoaXMiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwicnVuIiwiY29udHJvbGxlciIsIiRpbmplY3QiLCJwcm90b3R5cGUiLCJkaXJlY3RpdmUiLCJlbGVtZW50IiwiYXR0cnMiLCJ1cmwiLCJiYWNrZ3JvdW5kIiwiYmFja2dyb3VuZC1pbWFnZSIsImJhY2tncm91bmQtc2l6ZSIsIndoZW4iLCJBbGxDb250ZW50Q3RybCIsIkNvbnRlbnRTZXJ2aWNlIiwiY29udGVudCIsImZpbmRDb250ZW50IiwiRmlsbUNvbnRlbnRDdHJsIiwiU2VyaWFsQ29udGVudEN0cmwiLCIkcmVzb3VyY2UiLCJ0eXBlIiwiQ29udGVudCIsInF1ZXJ5IiwiY3JlYXRlQ29udGVudCIsImNvbnRlbnREYXRhIiwiJHNhdmUiLCJzZWxmIiwic2VydmljZSIsIkZpbG1DYXJkQ3RybCIsIlNlcmlhbENhcmRDdHJsIiwiY29udGVudEl0ZW0iLCJsaW5rZXIiLCJvbiIsImxvd2VyY2FzZSIsIml0ZW0iLCIkYXBwbHkiLCJyZXN0cmljdCIsInJlcGxhY2UiLCJQcm9maWxlQ29uZmlnIiwiaGFzUGVybWlzc2lvbiIsInBlcm0iLCJwcm9maWxlIiwicGVybXMiLCJsb2dpbiIsIlByb2ZpbGVDdHJsIiwiUmVjZW50Q3RybCIsInBvc3RlciIsImxvYWRDYXJvdXNlbCIsIm93bENhcm91c2VsIiwibG9vcCIsIm5hdiIsInJlc3BvbnNpdmUiLDEyMDAsIml0ZW1zIiw5OTIsNzY4LDQ3OSwiJHdhdGNoQ29sbGVjdGlvbiIsIlVwbG9hZEN0cmwiLCJVcGxvYWREYXRhIiwiZ2V0IiwiY29uc29sZSIsImxvZyIsInNldCIsImRhdGEiLCJ1cGxvYWREYXRhIiwiZmFjdG9yeSIsImlucHV0Q2h1bmsiLCJsbVVybFBhcnNlciIsIiRodHRwIiwiZmluZCIsInBhcmFtcyIsInRoZW4iLCJyZXNwb25jZSJdLCJtYXBwaW5ncyI6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VUFBQSxjQUFBK0QsR0FFQUEsRUFBQWpFLFNBQUEsWUFBQSxRQUFBIiwiZmlsZSI6ImFsbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBnb29kbCBvbiA0LzIvMjAxNi5cclxuICovXHJcblxyXG5cclxuYW5ndWxhci5tb2R1bGUoJ2NvbnRyb2wuaW5wdXQtY29udHJvbCcsIFtdKVxyXG4gICAgLmRpcmVjdGl2ZSgnbG1JbnB1dCcsIGxtSW5wdXQpO1xyXG5cclxuZnVuY3Rpb24gbG1JbnB1dCgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgYmluZE1vZGVsOic9bmdNb2RlbCdcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcclxuICAgICAgICB0cmFuc2NsdWRlOiB0cnVlLFxyXG4gICAgICAgICd0ZW1wbGF0ZVVybCc6ICcvYXBwL2NvbnRyb2wvaW5wdXQvaW5wdXQtY29udHJvbC5odG1sJyxcclxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW0sIGF0dHIsIG5nTW9kZWwpIHtcclxuICAgICAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICAgICAgICAgIC8vIGVsZW0ub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyAgICAgZWxlbS5hZGRDbGFzcygnbG0taW5wdXQtZm9jdXNlZCcpO1xyXG4gICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQnJhaWRuZXIgb24gMzAvMDEvMjAxNi5cclxuICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ0FwcCcsIFtcclxuICAgICAgICAnbmdSb3V0ZScsXHJcbiAgICAgICAgJ25nQW5pbWF0ZScsXHJcblxyXG4gICAgICAgIC8vTW9kdWxlc1xyXG4gICAgICAgICdDb250ZW50TW9kdWxlJyxcclxuICAgICAgICAnQ29udHJvbHNNb2R1bGUnLFxyXG4gICAgICAgICdDb250ZW50Q2FyZE1vZHVsZScsXHJcbiAgICAgICAgJ0l0ZW1Nb2R1bGUnLFxyXG4gICAgICAgICdVcGxvYWRNb2R1bGUnLFxyXG4gICAgICAgICdQcm9maWxlTW9kdWxlJyxcclxuICAgICAgICAnUmVjZW50TW9kdWxlJ1xyXG4gICAgXSlcclxuICAgICAgICAuY29uZmlnKFJvdXRlQ29uZmlnKVxyXG4gICAgICAgIC5ydW4oTW9uaXRvckNvbmZpZylcclxuICAgICAgICAucnVuKEFuYWx5dGljc0NvbmZpZylcclxuICAgICAgICAuY29udHJvbGxlcihcIk5hdmlnYXRpb25DdHJsXCIsIE5hdmlnYXRpb25DdHJsKTtcclxuXHJcbiAgICBNb25pdG9yQ29uZmlnLiRpbmplY3QgPSBbJyRyb290U2NvcGUnXTtcclxuICAgIGZ1bmN0aW9uIE1vbml0b3JDb25maWcoJHJvb3RTY29wZSkge1xyXG4gICAgICAgICRyb290U2NvcGUuYWN0aXZlVGFiID0gXCIvXCI7XHJcbiAgICAgICAgJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN0YXJ0JywgZnVuY3Rpb24gKGV2ZW50LCBuZXh0KSB7XHJcbiAgICAgICAgICAgIC8vVE9ETyBhZGQgbW9uaXRvcmluZ1xyXG4gICAgICAgICAgICBpZiAobmV4dC4kJHJvdXRlKSB7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmFjdGl2ZVRhYiA9IG5leHQuJCRyb3V0ZS5vcmlnaW5hbFBhdGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBSb3V0ZUNvbmZpZy4kaW5qZWN0ID0gWyckcm91dGVQcm92aWRlcicsICckbG9jYXRpb25Qcm92aWRlciddO1xyXG4gICAgZnVuY3Rpb24gUm91dGVDb25maWcoJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XHJcbiAgICAgICAgJHJvdXRlUHJvdmlkZXIub3RoZXJ3aXNlKHtcclxuICAgICAgICAgICAgcmVkaXJlY3RUbzogJy8nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIEFuYWx5dGljc0NvbmZpZy4kaW5qZWN0ID0gWyckcm9vdFNjb3BlJywgJyRsb2NhdGlvbicsICckd2luZG93J107XHJcbiAgICBmdW5jdGlvbiBBbmFseXRpY3NDb25maWcoJHJvb3RTY29wZSwgJGxvY2F0aW9uLCAkd2luZG93KSB7XHJcbiAgICAgICAgJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN1Y2Nlc3MnLFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoISR3aW5kb3cuZ2EpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkd2luZG93LmdhKCdzZW5kJywgJ3BhZ2V2aWV3Jywge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2U6ICRsb2NhdGlvbi5wYXRoKClcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBOYXZpZ2F0aW9uQ3RybC4kaW5qZWN0ID0gWyckc2NvcGUnXTtcclxuICAgIGZ1bmN0aW9uIE5hdmlnYXRpb25DdHJsICgkc2NvcGUpIHtcclxuICAgICAgICAkc2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uIChldmVudCwgY3VycmVudCkge1xyXG4gICAgICAgICAgICB2YXIgdG90YWxXaWR0aCA9ICQoJ21lbnUgdWwnKS53aWR0aCgpO1xyXG4gICAgICAgICAgICAkKFwibWVudSB1bCBsaVwiKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgZWwpIHtcclxuICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9ICQoZWwpLm91dGVyV2lkdGgoKTtcclxuICAgICAgICAgICAgICAgIHZhciB0YWIgPSAkc2NvcGUudGFic1tpbmRleF07XHJcbiAgICAgICAgICAgICAgICB0YWIuaW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYi5sZWZ0ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB0YWIucmlnaHQgPSB0b3RhbFdpZHRoIC0gd2lkdGg7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsYXN0VGFiID0gJHNjb3BlLnRhYnNbaW5kZXggLSAxXTtcclxuICAgICAgICAgICAgICAgICAgICB0YWIubGVmdCA9IHRvdGFsV2lkdGggLSBsYXN0VGFiLnJpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYi5yaWdodCA9IGxhc3RUYWIucmlnaHQgLSB3aWR0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuYWN0aXZlVGFiLmluZGV4T2YodGFiLmlkKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0VGFiKHRhYik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkc2NvcGUudGFicyA9IFtcclxuICAgICAgICAgICAgbmV3IFRhYihcIi9cIiwgXCLQktGB0LVcIiksXHJcbiAgICAgICAgICAgIG5ldyBUYWIoXCIvZmlsbVwiLCBcItCk0LjQu9GM0LzRi1wiKSxcclxuICAgICAgICAgICAgbmV3IFRhYihcIi9zZXJpYWxcIiwgXCLQodC10YDQuNCw0LvRi1wiKSxcclxuICAgICAgICAgICAgbmV3IFRhYihcIi9hbmltZVwiLCBcItCQ0L3QuNC80LVcIiksXHJcbiAgICAgICAgICAgIG5ldyBUYWIoXCIvb3RoZXJcIiwgXCLQn9GA0L7Rh9C10LVcIiksXHJcbiAgICAgICAgICAgIG5ldyBUYWIoXCIvdXBsb2FkXCIsIFwi0JfQsNCz0YDRg9C30LjRgtGMINGE0LjQu9GM0LxcIilcclxuICAgICAgICBdO1xyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS5zZWxlY3RUYWIgPSBzZWxlY3RUYWI7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNlbGVjdFRhYih0YWIpIHtcclxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkVGFiO1xyXG4gICAgICAgICAgICB2YXIgaW5kaWNhdG9yID0gJCgnLm1lbnUtaW5kaWNhdG9yJyk7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9ICQoJ2xpLmFjdGl2ZS1tZW51JykuaW5kZXgoKTtcclxuXHJcbiAgICAgICAgICAgIHNlbGVjdGVkVGFiID0gJHNjb3BlLnRhYnNbdGFiLmluZGV4XTtcclxuICAgICAgICAgICAgaWYgKGluZGV4ID4gdGFiLmluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICBpbmRpY2F0b3IucmVtb3ZlQ2xhc3MoXCJyaWdodFwiKTtcclxuICAgICAgICAgICAgICAgIGluZGljYXRvci5hZGRDbGFzcyhcImxlZnRcIik7XHJcbiAgICAgICAgICAgICAgICBpbmRpY2F0b3IuY3NzKHtsZWZ0OiBzZWxlY3RlZFRhYi5sZWZ0fSk7XHJcbiAgICAgICAgICAgICAgICBpbmRpY2F0b3IuY3NzKHtyaWdodDogc2VsZWN0ZWRUYWIucmlnaHR9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGluZGljYXRvci5yZW1vdmVDbGFzcyhcImxlZnRcIik7XHJcbiAgICAgICAgICAgICAgICBpbmRpY2F0b3IuYWRkQ2xhc3MoXCJyaWdodFwiKTtcclxuICAgICAgICAgICAgICAgIGluZGljYXRvci5jc3Moe3JpZ2h0OiBzZWxlY3RlZFRhYi5yaWdodH0pO1xyXG4gICAgICAgICAgICAgICAgaW5kaWNhdG9yLmNzcyh7bGVmdDogc2VsZWN0ZWRUYWIubGVmdH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIFRhYihpZCwgbmFtZSwgc2VsZWN0ZWQpIHtcclxuICAgICAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkID0gc2VsZWN0ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgVGFiLnByb3RvdHlwZSA9IHtcclxuICAgICAgICBpZDogXCJcIixcclxuICAgICAgICBuYW1lOiBcIlwiLFxyXG4gICAgICAgIHNlbGVjdGVkOiBmYWxzZVxyXG4gICAgfTtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnQXBwJykuZGlyZWN0aXZlKCdiYWNrZ3JvdW5kJywgZnVuY3Rpb24oKXtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKXtcclxuICAgICAgICAgICAgdmFyIHVybCA9IGF0dHJzLmJhY2tncm91bmQ7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY3NzKHtcclxuICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLWltYWdlJzogJ3VybCgnICsgdXJsICsnKScsXHJcbiAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1zaXplJyA6ICdjb3ZlcidcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG5cclxuXHJcblxyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGdvb2RsIG9uIDMvOS8yMDE2LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnQ29udGVudE1vZHVsZScsIFsnQ29udGVudFNlcnZpY2VzJ10pXHJcbiAgICAgICAgLmNvbmZpZyhSb3V0ZUNvbmZpZylcclxuICAgICAgICAuY29udHJvbGxlcignQWxsQ29udGVudEN0cmwnLCBBbGxDb250ZW50Q3RybClcclxuICAgICAgICAuY29udHJvbGxlcignU2VyaWFsQ29udGVudEN0cmwnLCBTZXJpYWxDb250ZW50Q3RybClcclxuICAgICAgICAuY29udHJvbGxlcignRmlsbUNvbnRlbnRDdHJsJywgRmlsbUNvbnRlbnRDdHJsKTtcclxuXHJcbiAgICBmdW5jdGlvbiBSb3V0ZUNvbmZpZygkcm91dGVQcm92aWRlcikge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgICAgICAkcm91dGVQcm92aWRlci53aGVuKCcvJywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9hcHAvY29udGVudC9jb250ZW50Lmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQWxsQ29udGVudEN0cmwnXHJcbiAgICAgICAgfSkud2hlbignL2ZpbG0nLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL2FwcC9jb250ZW50L2NvbnRlbnQuaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdGaWxtQ29udGVudEN0cmwnXHJcbiAgICAgICAgfSkud2hlbignL3NlcmlhbCcsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvYXBwL2NvbnRlbnQvY29udGVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1NlcmlhbENvbnRlbnRDdHJsJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIEFsbENvbnRlbnRDdHJsLiRpbmplY3QgPSBbJyRzY29wZScsICdDb250ZW50U2VydmljZSddO1xyXG4gICAgZnVuY3Rpb24gQWxsQ29udGVudEN0cmwoJHNjb3BlLCBDb250ZW50U2VydmljZSkge1xyXG4gICAgICAgICRzY29wZS5jb250ZW50ID0gQ29udGVudFNlcnZpY2UuZmluZENvbnRlbnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBGaWxtQ29udGVudEN0cmwuJGluamVjdCA9IFsnJHNjb3BlJywgJ0NvbnRlbnRTZXJ2aWNlJ107XHJcbiAgICBmdW5jdGlvbiBGaWxtQ29udGVudEN0cmwoJHNjb3BlLCBDb250ZW50U2VydmljZSkge1xyXG4gICAgICAgICRzY29wZS5jb250ZW50ID0gQ29udGVudFNlcnZpY2UuZmluZENvbnRlbnQobnVsbCwgJ0ZpbG0nKTtcclxuICAgIH1cclxuXHJcbiAgICBTZXJpYWxDb250ZW50Q3RybC4kaW5qZWN0ID0gWyckc2NvcGUnLCAnQ29udGVudFNlcnZpY2UnXTtcclxuICAgIGZ1bmN0aW9uIFNlcmlhbENvbnRlbnRDdHJsKCRzY29wZSwgQ29udGVudFNlcnZpY2UpIHtcclxuICAgICAgICAkc2NvcGUuY29udGVudCA9IENvbnRlbnRTZXJ2aWNlLmZpbmRDb250ZW50KG51bGwsICdTZXJpYWwnKTtcclxuICAgIH1cclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBCcmFpZG5lciBvbiAzMC8wMS8yMDE2LlxyXG4gKi9cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnQXBwJywgW1xyXG4gICAgICAgICduZ1JvdXRlJyxcclxuICAgICAgICAnbmdBbmltYXRlJyxcclxuXHJcbiAgICAgICAgLy9Nb2R1bGVzXHJcbiAgICAgICAgJ0NvbnRlbnRNb2R1bGUnLFxyXG4gICAgICAgICdDb250cm9sc01vZHVsZScsXHJcbiAgICAgICAgJ0NvbnRlbnRDYXJkTW9kdWxlJyxcclxuICAgICAgICAnSXRlbU1vZHVsZScsXHJcbiAgICAgICAgJ1VwbG9hZE1vZHVsZScsXHJcbiAgICAgICAgJ1Byb2ZpbGVNb2R1bGUnLFxyXG4gICAgICAgICdSZWNlbnRNb2R1bGUnXHJcbiAgICBdKVxyXG4gICAgICAgIC5jb25maWcoUm91dGVDb25maWcpXHJcbiAgICAgICAgLnJ1bihNb25pdG9yQ29uZmlnKVxyXG4gICAgICAgIC5ydW4oQW5hbHl0aWNzQ29uZmlnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKFwiTmF2aWdhdGlvbkN0cmxcIiwgTmF2aWdhdGlvbkN0cmwpO1xyXG5cclxuICAgIE1vbml0b3JDb25maWcuJGluamVjdCA9IFsnJHJvb3RTY29wZSddO1xyXG4gICAgZnVuY3Rpb24gTW9uaXRvckNvbmZpZygkcm9vdFNjb3BlKSB7XHJcbiAgICAgICAgJHJvb3RTY29wZS5hY3RpdmVUYWIgPSBcIi9cIjtcclxuICAgICAgICAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbiAoZXZlbnQsIG5leHQpIHtcclxuICAgICAgICAgICAgLy9UT0RPIGFkZCBtb25pdG9yaW5nXHJcbiAgICAgICAgICAgIGlmIChuZXh0LiQkcm91dGUpIHtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuYWN0aXZlVGFiID0gbmV4dC4kJHJvdXRlLm9yaWdpbmFsUGF0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIFJvdXRlQ29uZmlnLiRpbmplY3QgPSBbJyRyb3V0ZVByb3ZpZGVyJywgJyRsb2NhdGlvblByb3ZpZGVyJ107XHJcbiAgICBmdW5jdGlvbiBSb3V0ZUNvbmZpZygkcm91dGVQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcclxuICAgICAgICAkcm91dGVQcm92aWRlci5vdGhlcndpc2Uoe1xyXG4gICAgICAgICAgICByZWRpcmVjdFRvOiAnLydcclxuICAgICAgICB9KTtcclxuICAgICAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgQW5hbHl0aWNzQ29uZmlnLiRpbmplY3QgPSBbJyRyb290U2NvcGUnLCAnJGxvY2F0aW9uJywgJyR3aW5kb3cnXTtcclxuICAgIGZ1bmN0aW9uIEFuYWx5dGljc0NvbmZpZygkcm9vdFNjb3BlLCAkbG9jYXRpb24sICR3aW5kb3cpIHtcclxuICAgICAgICAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3VjY2VzcycsXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICghJHdpbmRvdy5nYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICR3aW5kb3cuZ2EoJ3NlbmQnLCAncGFnZXZpZXcnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZTogJGxvY2F0aW9uLnBhdGgoKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIE5hdmlnYXRpb25DdHJsLiRpbmplY3QgPSBbJyRzY29wZSddO1xyXG4gICAgZnVuY3Rpb24gTmF2aWdhdGlvbkN0cmwgKCRzY29wZSkge1xyXG4gICAgICAgICRzY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN0YXJ0JywgZnVuY3Rpb24gKGV2ZW50LCBjdXJyZW50KSB7XHJcbiAgICAgICAgICAgIHZhciB0b3RhbFdpZHRoID0gJCgnbWVudSB1bCcpLndpZHRoKCk7XHJcbiAgICAgICAgICAgICQoXCJtZW51IHVsIGxpXCIpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gJChlbCkub3V0ZXJXaWR0aCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhYiA9ICRzY29wZS50YWJzW2luZGV4XTtcclxuICAgICAgICAgICAgICAgIHRhYi5pbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFiLmxlZnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYi5yaWdodCA9IHRvdGFsV2lkdGggLSB3aWR0aDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxhc3RUYWIgPSAkc2NvcGUudGFic1tpbmRleCAtIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYi5sZWZ0ID0gdG90YWxXaWR0aCAtIGxhc3RUYWIucmlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFiLnJpZ2h0ID0gbGFzdFRhYi5yaWdodCAtIHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5hY3RpdmVUYWIuaW5kZXhPZih0YWIuaWQpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RUYWIodGFiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS50YWJzID0gW1xyXG4gICAgICAgICAgICBuZXcgVGFiKFwiL1wiLCBcItCS0YHQtVwiKSxcclxuICAgICAgICAgICAgbmV3IFRhYihcIi9maWxtXCIsIFwi0KTQuNC70YzQvNGLXCIpLFxyXG4gICAgICAgICAgICBuZXcgVGFiKFwiL3NlcmlhbFwiLCBcItCh0LXRgNC40LDQu9GLXCIpLFxyXG4gICAgICAgICAgICBuZXcgVGFiKFwiL2FuaW1lXCIsIFwi0JDQvdC40LzQtVwiKSxcclxuICAgICAgICAgICAgbmV3IFRhYihcIi9vdGhlclwiLCBcItCf0YDQvtGH0LXQtVwiKSxcclxuICAgICAgICAgICAgbmV3IFRhYihcIi91cGxvYWRcIiwgXCLQl9Cw0LPRgNGD0LfQuNGC0Ywg0YTQuNC70YzQvFwiKVxyXG4gICAgICAgIF07XHJcbiAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdFRhYiA9IHNlbGVjdFRhYjtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2VsZWN0VGFiKHRhYikge1xyXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRUYWI7XHJcbiAgICAgICAgICAgIHZhciBpbmRpY2F0b3IgPSAkKCcubWVudS1pbmRpY2F0b3InKTtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gJCgnbGkuYWN0aXZlLW1lbnUnKS5pbmRleCgpO1xyXG5cclxuICAgICAgICAgICAgc2VsZWN0ZWRUYWIgPSAkc2NvcGUudGFic1t0YWIuaW5kZXhdO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPiB0YWIuaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIGluZGljYXRvci5yZW1vdmVDbGFzcyhcInJpZ2h0XCIpO1xyXG4gICAgICAgICAgICAgICAgaW5kaWNhdG9yLmFkZENsYXNzKFwibGVmdFwiKTtcclxuICAgICAgICAgICAgICAgIGluZGljYXRvci5jc3Moe2xlZnQ6IHNlbGVjdGVkVGFiLmxlZnR9KTtcclxuICAgICAgICAgICAgICAgIGluZGljYXRvci5jc3Moe3JpZ2h0OiBzZWxlY3RlZFRhYi5yaWdodH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaW5kaWNhdG9yLnJlbW92ZUNsYXNzKFwibGVmdFwiKTtcclxuICAgICAgICAgICAgICAgIGluZGljYXRvci5hZGRDbGFzcyhcInJpZ2h0XCIpO1xyXG4gICAgICAgICAgICAgICAgaW5kaWNhdG9yLmNzcyh7cmlnaHQ6IHNlbGVjdGVkVGFiLnJpZ2h0fSk7XHJcbiAgICAgICAgICAgICAgICBpbmRpY2F0b3IuY3NzKHtsZWZ0OiBzZWxlY3RlZFRhYi5sZWZ0fSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gVGFiKGlkLCBuYW1lLCBzZWxlY3RlZCkge1xyXG4gICAgICAgIHRoaXMuaWQgPSBpZDtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWQgPSBzZWxlY3RlZDtcclxuICAgIH1cclxuXHJcbiAgICBUYWIucHJvdG90eXBlID0ge1xyXG4gICAgICAgIGlkOiBcIlwiLFxyXG4gICAgICAgIG5hbWU6IFwiXCIsXHJcbiAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlXHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdBcHAnKS5kaXJlY3RpdmUoJ2JhY2tncm91bmQnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpe1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gYXR0cnMuYmFja2dyb3VuZDtcclxuICAgICAgICAgICAgZWxlbWVudC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgJ2JhY2tncm91bmQtaW1hZ2UnOiAndXJsKCcgKyB1cmwgKycpJyxcclxuICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLXNpemUnIDogJ2NvdmVyJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcbn0pKCk7XG4vKipcclxuICogQ3JlYXRlZCBieSBnb29kbCBvbiAzLzkvMjAxNi5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgUm91dGVDb25maWcuJGluamVjdCA9IFtcIiRyb3V0ZVByb3ZpZGVyXCJdO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ0NvbnRlbnRNb2R1bGUnLCBbJ0NvbnRlbnRTZXJ2aWNlcyddKVxyXG4gICAgICAgIC5jb25maWcoUm91dGVDb25maWcpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0FsbENvbnRlbnRDdHJsJywgQWxsQ29udGVudEN0cmwpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1NlcmlhbENvbnRlbnRDdHJsJywgU2VyaWFsQ29udGVudEN0cmwpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0ZpbG1Db250ZW50Q3RybCcsIEZpbG1Db250ZW50Q3RybCk7XHJcblxyXG4gICAgZnVuY3Rpb24gUm91dGVDb25maWcoJHJvdXRlUHJvdmlkZXIpIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcbiAgICAgICAgJHJvdXRlUHJvdmlkZXIud2hlbignLycsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvYXBwL2NvbnRlbnQvY29udGVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0FsbENvbnRlbnRDdHJsJ1xyXG4gICAgICAgIH0pLndoZW4oJy9maWxtJywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9hcHAvY29udGVudC9jb250ZW50Lmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnRmlsbUNvbnRlbnRDdHJsJ1xyXG4gICAgICAgIH0pLndoZW4oJy9zZXJpYWwnLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL2FwcC9jb250ZW50L2NvbnRlbnQuaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdTZXJpYWxDb250ZW50Q3RybCdcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBBbGxDb250ZW50Q3RybC4kaW5qZWN0ID0gWyckc2NvcGUnLCAnQ29udGVudFNlcnZpY2UnXTtcclxuICAgIGZ1bmN0aW9uIEFsbENvbnRlbnRDdHJsKCRzY29wZSwgQ29udGVudFNlcnZpY2UpIHtcclxuICAgICAgICAkc2NvcGUuY29udGVudCA9IENvbnRlbnRTZXJ2aWNlLmZpbmRDb250ZW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgRmlsbUNvbnRlbnRDdHJsLiRpbmplY3QgPSBbJyRzY29wZScsICdDb250ZW50U2VydmljZSddO1xyXG4gICAgZnVuY3Rpb24gRmlsbUNvbnRlbnRDdHJsKCRzY29wZSwgQ29udGVudFNlcnZpY2UpIHtcclxuICAgICAgICAkc2NvcGUuY29udGVudCA9IENvbnRlbnRTZXJ2aWNlLmZpbmRDb250ZW50KG51bGwsICdGaWxtJyk7XHJcbiAgICB9XHJcblxyXG4gICAgU2VyaWFsQ29udGVudEN0cmwuJGluamVjdCA9IFsnJHNjb3BlJywgJ0NvbnRlbnRTZXJ2aWNlJ107XHJcbiAgICBmdW5jdGlvbiBTZXJpYWxDb250ZW50Q3RybCgkc2NvcGUsIENvbnRlbnRTZXJ2aWNlKSB7XHJcbiAgICAgICAgJHNjb3BlLmNvbnRlbnQgPSBDb250ZW50U2VydmljZS5maW5kQ29udGVudChudWxsLCAnU2VyaWFsJyk7XHJcbiAgICB9XHJcbn0pKCk7XG4vKipcclxuICogQ3JlYXRlZCBieSBnb29kbCBvbiAzLzkvMjAxNi5cclxuICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIENvbnRlbnRTZXJ2aWNlLiRpbmplY3QgPSBbXCIkcmVzb3VyY2VcIl07XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnQ29udGVudFNlcnZpY2VzJywgWyduZ1Jlc291cmNlJ10pLnNlcnZpY2UoJ0NvbnRlbnRTZXJ2aWNlJywgQ29udGVudFNlcnZpY2UpO1xyXG5cclxuICAgIGZ1bmN0aW9uIENvbnRlbnRTZXJ2aWNlKCRyZXNvdXJjZSkge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHZhciBDb250ZW50ID0gJHJlc291cmNlKCcvcmVzdC9jb250ZW50Jywge30sIHt9KTtcclxuICAgICAgICBzZWxmLmZpbmRDb250ZW50ID0gZmluZENvbnRlbnQ7XHJcbiAgICAgICAgc2VsZi5jcmVhdGVDb250ZW50ID0gY3JlYXRlQ29udGVudDtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZmluZENvbnRlbnQobmFtZSwgdHlwZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gQ29udGVudC5xdWVyeSh7bmFtZTogbmFtZSwgdHlwZTogdHlwZX0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlQ29udGVudChjb250ZW50RGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgY29udGVudCA9IG5ldyBDb250ZW50KGNvbnRlbnREYXRhKTtcclxuICAgICAgICAgICAgY29udGVudC4kc2F2ZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gY29udGVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHNlbGY7XHJcbiAgICB9XHJcbn0pKCk7XHJcblxuLyoqXHJcbiAqIENyZWF0ZWQgYnkgZ29vZGwgb24gMy8xMy8yMDE2LlxyXG4gKi9cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIFJvdXRlQ29uZmlnLiRpbmplY3QgPSBbXCIkcm91dGVQcm92aWRlclwiXTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdDb250ZW50Q2FyZE1vZHVsZScsIFtdKTtcclxuICAgIFxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ0NvbnRlbnRDYXJkTW9kdWxlJylcclxuICAgICAgICAuY29uZmlnKFJvdXRlQ29uZmlnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdGaWxtQ2FyZEN0cmwnLCBGaWxtQ2FyZEN0cmwpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1NlcmlhbENhcmRDdHJsJywgU2VyaWFsQ2FyZEN0cmwpO1xyXG5cclxuICAgIGZ1bmN0aW9uIFJvdXRlQ29uZmlnKCRyb3V0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG4gICAgICAgICRyb3V0ZVByb3ZpZGVyLndoZW4oJy9maWxtLzpjb250ZW50X2lkJywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9hcHAvY29udGVudC1jYXJkL2NvbnRlbnQtY2FyZC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0ZpbG1DYXJkQ3RybCdcclxuICAgICAgICB9KS53aGVuKCcvc2VyaWFsLzpjb250ZW50X2lkJywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9hcHAvY29udGVudC1jYXJkL2NvbnRlbnQtY2FyZC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1NlcmlhbENhcmRDdHJsJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIEZpbG1DYXJkQ3RybCgpIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gU2VyaWFsQ2FyZEN0cmwoKSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG4gICAgfVxyXG4gICAgXHJcbn0pKCk7XG4vKipcclxuICogQ3JlYXRlZCBieSBnb29kbCBvbiA0LzIvMjAxNi5cclxuICovXHJcbihmdW5jdGlvbigpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdDb250cm9sc01vZHVsZScsIFtcclxuICAgICAgICAnY29udHJvbC5pbnB1dC1jb250cm9sJywgXHJcbiAgICAgICAgJ2NvbnRyb2wucGFyc2VyJyxcclxuICAgICAgICAnY29udHJvbC5pbnB1dC1jaHVuaydcclxuICAgIF0pO1xyXG59KSgpO1xuLyoqXHJcbiAqIENyZWF0ZWQgYnkgZ29vZGwgb24gMy85LzIwMTYuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ0l0ZW1Nb2R1bGUnLCBbXSlcclxuICAgICAgICAuZGlyZWN0aXZlKCdjb250ZW50SXRlbScsIGNvbnRlbnRJdGVtKTtcclxuXHJcbiAgICBjb250ZW50SXRlbS4kaW5qZWN0ID0gWyckbG9jYXRpb24nXTtcclxuICAgIGZ1bmN0aW9uIGNvbnRlbnRJdGVtKCRsb2NhdGlvbikge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgICAgICBmdW5jdGlvbiBsaW5rZXIoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL1wiICsgYW5ndWxhci5sb3dlcmNhc2Uoc2NvcGUuaXRlbS50eXBlKSArXCIvXCIgKyBzY29wZS5pdGVtLmlkKTtcclxuICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbGluazogbGlua2VyLFxyXG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxyXG4gICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgaXRlbTogJz0nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL2FwcC9pdGVtL2l0ZW0uaHRtbCdcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59KSgpO1xuLyoqXHJcbiAqIENyZWF0ZWQgYnkgZ29vZGwgb24gMy8yMS8yMDE2LlxyXG4gKi9cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIFxyXG4gICAgUm91dGVDb25maWcuJGluamVjdCA9IFtcIiRyb3V0ZVByb3ZpZGVyXCJdO1xyXG4gICAgUHJvZmlsZUNvbmZpZy4kaW5qZWN0ID0gW1wiJHJvb3RTY29wZVwiXTtcclxuICAgIFByb2ZpbGVDdHJsLiRpbmplY3QgPSBbXCIkc2NvcGVcIl07XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnUHJvZmlsZU1vZHVsZScsIFtdKTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdQcm9maWxlTW9kdWxlJykuY29uZmlnKFJvdXRlQ29uZmlnKTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdQcm9maWxlTW9kdWxlJykucnVuKFByb2ZpbGVDb25maWcpO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ1Byb2ZpbGVNb2R1bGUnKS5jb250cm9sbGVyKCdQcm9maWxlQ3RybCcsIFByb2ZpbGVDdHJsKTtcclxuXHJcbiAgICBmdW5jdGlvbiBSb3V0ZUNvbmZpZygkcm91dGVQcm92aWRlcikge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgICAgICAkcm91dGVQcm92aWRlci53aGVuKCcvcHJvZmlsZScsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvYXBwL3Byb2ZpbGUvcHJvZmlsZS5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1Byb2ZpbGVDdHJsJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBQcm9maWxlQ29uZmlnKCRyb290U2NvcGUpIHtcclxuICAgICAgICAkcm9vdFNjb3BlLnByb2ZpbGUgPSB7bG9naW46IFwiQnJhaWRuZXJcIiwgcGVybXM6IFsndXNlcjplZGl0OnByb2ZpbGUnXX07XHJcbiAgICAgICAgJHJvb3RTY29wZS5oYXNQZXJtaXNzaW9uID0gaGFzUGVybWlzc2lvbjtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaGFzUGVybWlzc2lvbihwZXJtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwcm9maWxlLnBlcm1zLmluZGV4T2YocGVybSkgPiAtMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gUHJvZmlsZUN0cmwoJHNjb3BlKSB7XHJcbiAgICAgICAgJ25nSW5qZWN0JztcclxuICAgICAgICBcclxuICAgIH1cclxuICAgIFxyXG59KSgpO1xuLyoqXHJcbiAqIENyZWF0ZWQgYnkgQnJhaWRuZXJcclxuICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ1JlY2VudE1vZHVsZScsIFtdKVxyXG4gICAgICAgIC5jb250cm9sbGVyKFwiUmVjZW50Q3RybFwiLCBSZWNlbnRDdHJsKTtcclxuXHJcbiAgICBSZWNlbnRDdHJsLiRpbmplY3QgPSBbJyRzY29wZSddO1xyXG4gICAgZnVuY3Rpb24gUmVjZW50Q3RybCgkc2NvcGUpIHtcclxuICAgICAgICAkc2NvcGUuY29udGVudCA9IFtcclxuICAgICAgICAgICAge25hbWU6ICdab290b3BpYScsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy83NzUyNzYuanBnJywgaWQ6IDAsIHR5cGU6ICdmaWxtJ30sXHJcbiAgICAgICAgICAgIHtuYW1lOiAnQmF0bWFuIHYgU3VwZXJtYW46IERhd24gb2YgSnVzdGljZScsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy83NzA2MzEuanBnJywgaWQ6IDAsIHR5cGU6ICdmaWxtJ30sXHJcbiAgICAgICAgICAgIHtuYW1lOiAnVGhlIEp1c3RpY2UgTGVhZ3VlIFBhcnQgT25lJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzQyNDk5NC5qcGcnLCBpZDogMCwgdHlwZTogJ2ZpbG0nfSxcclxuICAgICAgICAgICAge25hbWU6ICdUaGUgZmxhc2gnLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvODE3NTA2LmpwZycsIGlkOiAwLCB0eXBlOiAnZmlsbSd9LFxyXG4gICAgICAgICAgICB7bmFtZTogJ1RoZSBKdXN0aWNlIExlYWd1ZSBQYXJ0IE9uZScsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80MjQ5OTQuanBnJywgaWQ6IDAsIHR5cGU6ICdmaWxtJ30sXHJcbiAgICAgICAgICAgIHtuYW1lOiAnRnJvemVuJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzQ5MzIwOC5qcGcnLCBpZDogMCwgdHlwZTogJ2ZpbG0nfSxcclxuICAgICAgICAgICAge25hbWU6ICdCYXRtYW4gdiBTdXBlcm1hbjogRGF3biBvZiBKdXN0aWNlJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzc3MDYzMS5qcGcnLCBpZDogMCwgdHlwZTogJ2ZpbG0nfSxcclxuICAgICAgICAgICAge25hbWU6ICdVbnRpdGxlZCBTcGlkZXItTWFuIFJlYm9vdCcsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy82OTA1OTMuanBnJywgaWQ6IDAsIHR5cGU6ICdmaWxtJ31cclxuICAgICAgICBdO1xyXG4gICAgfVxyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdSZWNlbnRNb2R1bGUnKS5kaXJlY3RpdmUoJ293bENhcm91c2VsJywgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICB2YXIgbGlua2VyID0gZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgbG9hZENhcm91c2VsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5vd2xDYXJvdXNlbChcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvb3A6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYXY6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zaXZlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMjAwOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IDZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA5OTI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogNFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDc2ODoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiAzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgNDc5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IDJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKGF0dHIub3dsQ2Fyb3VzZWwsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGxvYWRDYXJvdXNlbCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6IFwiQVwiLFxyXG4gICAgICAgICAgICBsaW5rOiBsaW5rZXJcclxuICAgICAgICB9O1xyXG5cclxuICAgIH0pO1xyXG59KSgpO1xuLyoqXHJcbiAqIENyZWF0ZWQgYnkgQnJhaWRuZXIgb24gMDYvMDMvMjAxNi5cclxuICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ1VwbG9hZE1vZHVsZScsIFsnbmdSZXNvdXJjZSddKTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdVcGxvYWRNb2R1bGUnKS5jb25maWcoUm91dGVDb25maWcpO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ1VwbG9hZE1vZHVsZScpLmNvbnRyb2xsZXIoJ1VwbG9hZEN0cmwnLCBVcGxvYWRDdHJsKTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdVcGxvYWRNb2R1bGUnKS5mYWN0b3J5KCdVcGxvYWREYXRhJywgVXBsb2FkRGF0YSk7XHJcblxyXG4gICAgUm91dGVDb25maWcuJGluamVjdCA9IFsnJHJvdXRlUHJvdmlkZXInXTtcclxuICAgIGZ1bmN0aW9uIFJvdXRlQ29uZmlnKCRyb3V0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgJHJvdXRlUHJvdmlkZXIud2hlbignL3VwbG9hZCcsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvYXBwL3VwbG9hZC91cGxvYWQuaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdVcGxvYWRDdHJsJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcblxyXG4gICAgVXBsb2FkQ3RybC4kaW5qZWN0ID0gWyckc2NvcGUnLCAnVXBsb2FkRGF0YSddO1xyXG4gICAgZnVuY3Rpb24gVXBsb2FkQ3RybCgkc2NvcGUsIFVwbG9hZERhdGEpIHtcclxuICAgICAgICB2YXIgY29udGVudCA9IFVwbG9hZERhdGEuZ2V0KCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coY29udGVudCk7XHJcbiAgICAgICAgVXBsb2FkRGF0YS5zZXQobnVsbCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coY29udGVudCk7XHJcbiAgICAgICAgaWYgKGNvbnRlbnQpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmNvbnRlbnQgPSBjb250ZW50O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBVcGxvYWREYXRhKCkge1xyXG4gICAgICAgIHZhciB1cGxvYWREYXRhID0ge307XHJcbiAgICAgICAgZnVuY3Rpb24gc2V0KGRhdGEpIHtcclxuICAgICAgICAgICAgdXBsb2FkRGF0YSA9IGRhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIGdldCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVwbG9hZERhdGE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzZXQ6IHNldCxcclxuICAgICAgICAgICAgZ2V0OiBnZXRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxufSkoKTtcbi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGdvb2RsIG9uIDQvMi8yMDE2LlxyXG4gKi9cclxuXHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnY29udHJvbC5pbnB1dC1jb250cm9sJywgW10pXHJcbiAgICAuZGlyZWN0aXZlKCdsbUlucHV0JywgbG1JbnB1dCk7XHJcblxyXG5mdW5jdGlvbiBsbUlucHV0KCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICBiaW5kTW9kZWw6Jz1uZ01vZGVsJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxyXG4gICAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXHJcbiAgICAgICAgJ3RlbXBsYXRlVXJsJzogJy9hcHAvY29udHJvbC9pbnB1dC9pbnB1dC1jb250cm9sLmh0bWwnLFxyXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbSwgYXR0ciwgbmdNb2RlbCkge1xyXG4gICAgICAgICAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgICAgICAgICAgLy8gZWxlbS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBlbGVtLmFkZENsYXNzKCdsbS1pbnB1dC1mb2N1c2VkJyk7XHJcbiAgICAgICAgICAgIC8vIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cbihmdW5jdGlvbiAoKSB7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnY29udHJvbC5pbnB1dC1jaHVuaycsIFtdKTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjb250cm9sLmlucHV0LWNodW5rJylcclxuICAgICAgICAuZGlyZWN0aXZlKCdsbUlucHV0Q2h1bmsnLCBpbnB1dENodW5rKTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBpbnB1dENodW5rKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICBiaW5kTW9kZWw6Jz1uZ01vZGVsJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXHJcbiAgICAgICAgICAgIC8vIHJlcGxhY2U6IHRydWUsXHJcbiAgICAgICAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXHJcbiAgICAgICAgICAgICd0ZW1wbGF0ZVVybCc6ICcvYXBwL2NvbnRyb2wvaW5wdXQtY2h1bmsvaW5wdXQtY2h1bmsuaHRtbCcsXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbSwgYXR0ciwgbmdNb2RlbCkge1xyXG4gICAgICAgICAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59KSgpO1xuLyoqXHJcbiAqIENyZWF0ZWQgYnkgS3V6bmV0c292TkUgb24gMDQuMDQuMjAxNi5cclxuICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnY29udHJvbC5wYXJzZXInLCBbXSk7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ0NvbnRyb2xzTW9kdWxlJykuZGlyZWN0aXZlKCdsbVVybFBhcnNlcicsIGxtVXJsUGFyc2VyKTtcclxuXHJcbiAgICBsbVVybFBhcnNlci4kaW5qZWN0ID0gWyckbG9jYXRpb24nLCAnJGh0dHAnLCAnVXBsb2FkRGF0YSddO1xyXG4gICAgZnVuY3Rpb24gbG1VcmxQYXJzZXIoJGxvY2F0aW9uLCAkaHR0cCwgVXBsb2FkRGF0YSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICBiaW5kTW9kZWw6Jz1uZ01vZGVsJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXHJcbiAgICAgICAgICAgIC8vIHJlcGxhY2U6IHRydWUsXHJcbiAgICAgICAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXHJcbiAgICAgICAgICAgICd0ZW1wbGF0ZVVybCc6ICcvYXBwL2NvbnRyb2wvdXJsLXBhcnNlci1jb250cm9sL3VybC1wYXJzZXItY29udHJvbC5odG1sJyxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtLCBhdHRyLCBuZ01vZGVsKSB7XHJcbiAgICAgICAgICAgICAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgICAgICAgICAgICAgIGVsZW0uZmluZCgnLmJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJy9yZXN0L2tpbm9wb2lzaycsIHtwYXJhbXM6IHt1cmw6IHNjb3BlLmJpbmRNb2RlbH19KS50aGVuKGZ1bmN0aW9uIChyZXNwb25jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25jZS5kYXRhLnVybCA9IHNjb3BlLmJpbmRNb2RlbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgVXBsb2FkRGF0YS5zZXQocmVzcG9uY2UuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvdXBsb2FkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGdvb2RsIG9uIDMvOS8yMDE2LlxyXG4gKi9cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ0NvbnRlbnRTZXJ2aWNlcycsIFsnbmdSZXNvdXJjZSddKS5zZXJ2aWNlKCdDb250ZW50U2VydmljZScsIENvbnRlbnRTZXJ2aWNlKTtcclxuXHJcbiAgICBmdW5jdGlvbiBDb250ZW50U2VydmljZSgkcmVzb3VyY2UpIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcblxyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICB2YXIgQ29udGVudCA9ICRyZXNvdXJjZSgnL3Jlc3QvY29udGVudCcsIHt9LCB7fSk7XHJcbiAgICAgICAgc2VsZi5maW5kQ29udGVudCA9IGZpbmRDb250ZW50O1xyXG4gICAgICAgIHNlbGYuY3JlYXRlQ29udGVudCA9IGNyZWF0ZUNvbnRlbnQ7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGZpbmRDb250ZW50KG5hbWUsIHR5cGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIENvbnRlbnQucXVlcnkoe25hbWU6IG5hbWUsIHR5cGU6IHR5cGV9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUNvbnRlbnQoY29udGVudERhdGEpIHtcclxuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBuZXcgQ29udGVudChjb250ZW50RGF0YSk7XHJcbiAgICAgICAgICAgIGNvbnRlbnQuJHNhdmUoKTtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBzZWxmO1xyXG4gICAgfVxyXG59KSgpO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBnb29kbCBvbiAzLzEzLzIwMTYuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ0NvbnRlbnRDYXJkTW9kdWxlJywgW10pO1xyXG4gICAgXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnQ29udGVudENhcmRNb2R1bGUnKVxyXG4gICAgICAgIC5jb25maWcoUm91dGVDb25maWcpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0ZpbG1DYXJkQ3RybCcsIEZpbG1DYXJkQ3RybClcclxuICAgICAgICAuY29udHJvbGxlcignU2VyaWFsQ2FyZEN0cmwnLCBTZXJpYWxDYXJkQ3RybCk7XHJcblxyXG4gICAgZnVuY3Rpb24gUm91dGVDb25maWcoJHJvdXRlUHJvdmlkZXIpIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcbiAgICAgICAgJHJvdXRlUHJvdmlkZXIud2hlbignL2ZpbG0vOmNvbnRlbnRfaWQnLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL2FwcC9jb250ZW50LWNhcmQvY29udGVudC1jYXJkLmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnRmlsbUNhcmRDdHJsJ1xyXG4gICAgICAgIH0pLndoZW4oJy9zZXJpYWwvOmNvbnRlbnRfaWQnLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL2FwcC9jb250ZW50LWNhcmQvY29udGVudC1jYXJkLmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnU2VyaWFsQ2FyZEN0cmwnXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gRmlsbUNhcmRDdHJsKCkge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBTZXJpYWxDYXJkQ3RybCgpIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcbiAgICB9XHJcbiAgICBcclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBnb29kbCBvbiA0LzIvMjAxNi5cclxuICovXHJcbihmdW5jdGlvbigpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdDb250cm9sc01vZHVsZScsIFtcclxuICAgICAgICAnY29udHJvbC5pbnB1dC1jb250cm9sJywgXHJcbiAgICAgICAgJ2NvbnRyb2wucGFyc2VyJyxcclxuICAgICAgICAnY29udHJvbC5pbnB1dC1jaHVuaydcclxuICAgIF0pO1xyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGdvb2RsIG9uIDMvOS8yMDE2LlxyXG4gKi9cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdJdGVtTW9kdWxlJywgW10pXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnY29udGVudEl0ZW0nLCBjb250ZW50SXRlbSk7XHJcblxyXG4gICAgY29udGVudEl0ZW0uJGluamVjdCA9IFsnJGxvY2F0aW9uJ107XHJcbiAgICBmdW5jdGlvbiBjb250ZW50SXRlbSgkbG9jYXRpb24pIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcbiAgICAgICAgZnVuY3Rpb24gbGlua2VyKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9cIiArIGFuZ3VsYXIubG93ZXJjYXNlKHNjb3BlLml0ZW0udHlwZSkgK1wiL1wiICsgc2NvcGUuaXRlbS5pZCk7XHJcbiAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGxpbms6IGxpbmtlcixcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcclxuICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgIGl0ZW06ICc9J1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9hcHAvaXRlbS9pdGVtLmh0bWwnXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBnb29kbCBvbiAzLzIxLzIwMTYuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnUHJvZmlsZU1vZHVsZScsIFtdKTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdQcm9maWxlTW9kdWxlJykuY29uZmlnKFJvdXRlQ29uZmlnKTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdQcm9maWxlTW9kdWxlJykucnVuKFByb2ZpbGVDb25maWcpO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ1Byb2ZpbGVNb2R1bGUnKS5jb250cm9sbGVyKCdQcm9maWxlQ3RybCcsIFByb2ZpbGVDdHJsKTtcclxuXHJcbiAgICBmdW5jdGlvbiBSb3V0ZUNvbmZpZygkcm91dGVQcm92aWRlcikge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgICAgICAkcm91dGVQcm92aWRlci53aGVuKCcvcHJvZmlsZScsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvYXBwL3Byb2ZpbGUvcHJvZmlsZS5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1Byb2ZpbGVDdHJsJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBQcm9maWxlQ29uZmlnKCRyb290U2NvcGUpIHtcclxuICAgICAgICAkcm9vdFNjb3BlLnByb2ZpbGUgPSB7bG9naW46IFwiQnJhaWRuZXJcIiwgcGVybXM6IFsndXNlcjplZGl0OnByb2ZpbGUnXX07XHJcbiAgICAgICAgJHJvb3RTY29wZS5oYXNQZXJtaXNzaW9uID0gaGFzUGVybWlzc2lvbjtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaGFzUGVybWlzc2lvbihwZXJtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwcm9maWxlLnBlcm1zLmluZGV4T2YocGVybSkgPiAtMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gUHJvZmlsZUN0cmwoJHNjb3BlKSB7XHJcbiAgICAgICAgJ25nSW5qZWN0JztcclxuICAgICAgICBcclxuICAgIH1cclxuICAgIFxyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEJyYWlkbmVyXHJcbiAqL1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdSZWNlbnRNb2R1bGUnLCBbXSlcclxuICAgICAgICAuY29udHJvbGxlcihcIlJlY2VudEN0cmxcIiwgUmVjZW50Q3RybCk7XHJcblxyXG4gICAgUmVjZW50Q3RybC4kaW5qZWN0ID0gWyckc2NvcGUnXTtcclxuICAgIGZ1bmN0aW9uIFJlY2VudEN0cmwoJHNjb3BlKSB7XHJcbiAgICAgICAgJHNjb3BlLmNvbnRlbnQgPSBbXHJcbiAgICAgICAgICAgIHtuYW1lOiAnWm9vdG9waWEnLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNzc1Mjc2LmpwZycsIGlkOiAwLCB0eXBlOiAnZmlsbSd9LFxyXG4gICAgICAgICAgICB7bmFtZTogJ0JhdG1hbiB2IFN1cGVybWFuOiBEYXduIG9mIEp1c3RpY2UnLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNzcwNjMxLmpwZycsIGlkOiAwLCB0eXBlOiAnZmlsbSd9LFxyXG4gICAgICAgICAgICB7bmFtZTogJ1RoZSBKdXN0aWNlIExlYWd1ZSBQYXJ0IE9uZScsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80MjQ5OTQuanBnJywgaWQ6IDAsIHR5cGU6ICdmaWxtJ30sXHJcbiAgICAgICAgICAgIHtuYW1lOiAnVGhlIGZsYXNoJywgcG9zdGVyOiAnaHR0cDovL3d3dy5raW5vcG9pc2sucnUvaW1hZ2VzL2ZpbG1fYmlnLzgxNzUwNi5qcGcnLCBpZDogMCwgdHlwZTogJ2ZpbG0nfSxcclxuICAgICAgICAgICAge25hbWU6ICdUaGUgSnVzdGljZSBMZWFndWUgUGFydCBPbmUnLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNDI0OTk0LmpwZycsIGlkOiAwLCB0eXBlOiAnZmlsbSd9LFxyXG4gICAgICAgICAgICB7bmFtZTogJ0Zyb3plbicsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy80OTMyMDguanBnJywgaWQ6IDAsIHR5cGU6ICdmaWxtJ30sXHJcbiAgICAgICAgICAgIHtuYW1lOiAnQmF0bWFuIHYgU3VwZXJtYW46IERhd24gb2YgSnVzdGljZScsIHBvc3RlcjogJ2h0dHA6Ly93d3cua2lub3BvaXNrLnJ1L2ltYWdlcy9maWxtX2JpZy83NzA2MzEuanBnJywgaWQ6IDAsIHR5cGU6ICdmaWxtJ30sXHJcbiAgICAgICAgICAgIHtuYW1lOiAnVW50aXRsZWQgU3BpZGVyLU1hbiBSZWJvb3QnLCBwb3N0ZXI6ICdodHRwOi8vd3d3Lmtpbm9wb2lzay5ydS9pbWFnZXMvZmlsbV9iaWcvNjkwNTkzLmpwZycsIGlkOiAwLCB0eXBlOiAnZmlsbSd9XHJcbiAgICAgICAgXTtcclxuICAgIH1cclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnUmVjZW50TW9kdWxlJykuZGlyZWN0aXZlKCdvd2xDYXJvdXNlbCcsIGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgdmFyIGxpbmtlciA9IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cikge1xyXG5cclxuICAgICAgICAgICAgdmFyIGxvYWRDYXJvdXNlbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQub3dsQ2Fyb3VzZWwoXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb29wOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmF2OiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2l2ZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMTIwMDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiA2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOTkyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IDRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA3Njg6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogM1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDQ3OToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiAyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgc2NvcGUuJHdhdGNoQ29sbGVjdGlvbihhdHRyLm93bENhcm91c2VsLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBsb2FkQ2Fyb3VzZWwoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiBcIkFcIixcclxuICAgICAgICAgICAgbGluazogbGlua2VyXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KTtcclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBCcmFpZG5lciBvbiAwNi8wMy8yMDE2LlxyXG4gKi9cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnVXBsb2FkTW9kdWxlJywgWyduZ1Jlc291cmNlJ10pO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ1VwbG9hZE1vZHVsZScpLmNvbmZpZyhSb3V0ZUNvbmZpZyk7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnVXBsb2FkTW9kdWxlJykuY29udHJvbGxlcignVXBsb2FkQ3RybCcsIFVwbG9hZEN0cmwpO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ1VwbG9hZE1vZHVsZScpLmZhY3RvcnkoJ1VwbG9hZERhdGEnLCBVcGxvYWREYXRhKTtcclxuXHJcbiAgICBSb3V0ZUNvbmZpZy4kaW5qZWN0ID0gWyckcm91dGVQcm92aWRlciddO1xyXG4gICAgZnVuY3Rpb24gUm91dGVDb25maWcoJHJvdXRlUHJvdmlkZXIpIHtcclxuICAgICAgICAkcm91dGVQcm92aWRlci53aGVuKCcvdXBsb2FkJywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9hcHAvdXBsb2FkL3VwbG9hZC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1VwbG9hZEN0cmwnXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuXHJcbiAgICBVcGxvYWRDdHJsLiRpbmplY3QgPSBbJyRzY29wZScsICdVcGxvYWREYXRhJ107XHJcbiAgICBmdW5jdGlvbiBVcGxvYWRDdHJsKCRzY29wZSwgVXBsb2FkRGF0YSkge1xyXG4gICAgICAgIHZhciBjb250ZW50ID0gVXBsb2FkRGF0YS5nZXQoKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhjb250ZW50KTtcclxuICAgICAgICBVcGxvYWREYXRhLnNldChudWxsKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhjb250ZW50KTtcclxuICAgICAgICBpZiAoY29udGVudCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuY29udGVudCA9IGNvbnRlbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIFVwbG9hZERhdGEoKSB7XHJcbiAgICAgICAgdmFyIHVwbG9hZERhdGEgPSB7fTtcclxuICAgICAgICBmdW5jdGlvbiBzZXQoZGF0YSkge1xyXG4gICAgICAgICAgICB1cGxvYWREYXRhID0gZGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0KCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdXBsb2FkRGF0YTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNldDogc2V0LFxyXG4gICAgICAgICAgICBnZXQ6IGdldFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnY29udHJvbC5pbnB1dC1jaHVuaycsIFtdKTtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjb250cm9sLmlucHV0LWNodW5rJylcclxuICAgICAgICAuZGlyZWN0aXZlKCdsbUlucHV0Q2h1bmsnLCBpbnB1dENodW5rKTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBpbnB1dENodW5rKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICBiaW5kTW9kZWw6Jz1uZ01vZGVsJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXHJcbiAgICAgICAgICAgIC8vIHJlcGxhY2U6IHRydWUsXHJcbiAgICAgICAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXHJcbiAgICAgICAgICAgICd0ZW1wbGF0ZVVybCc6ICcvYXBwL2NvbnRyb2wvaW5wdXQtY2h1bmsvaW5wdXQtY2h1bmsuaHRtbCcsXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbSwgYXR0ciwgbmdNb2RlbCkge1xyXG4gICAgICAgICAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEt1em5ldHNvdk5FIG9uIDA0LjA0LjIwMTYuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2NvbnRyb2wucGFyc2VyJywgW10pO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdDb250cm9sc01vZHVsZScpLmRpcmVjdGl2ZSgnbG1VcmxQYXJzZXInLCBsbVVybFBhcnNlcik7XHJcblxyXG4gICAgbG1VcmxQYXJzZXIuJGluamVjdCA9IFsnJGxvY2F0aW9uJywgJyRodHRwJywgJ1VwbG9hZERhdGEnXTtcclxuICAgIGZ1bmN0aW9uIGxtVXJsUGFyc2VyKCRsb2NhdGlvbiwgJGh0dHAsIFVwbG9hZERhdGEpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgYmluZE1vZGVsOic9bmdNb2RlbCdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxyXG4gICAgICAgICAgICAvLyByZXBsYWNlOiB0cnVlLFxyXG4gICAgICAgICAgICB0cmFuc2NsdWRlOiB0cnVlLFxyXG4gICAgICAgICAgICAndGVtcGxhdGVVcmwnOiAnL2FwcC9jb250cm9sL3VybC1wYXJzZXItY29udHJvbC91cmwtcGFyc2VyLWNvbnRyb2wuaHRtbCcsXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbSwgYXR0ciwgbmdNb2RlbCkge1xyXG4gICAgICAgICAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICAgICAgICAgICAgICBlbGVtLmZpbmQoJy5idXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvcmVzdC9raW5vcG9pc2snLCB7cGFyYW1zOiB7dXJsOiBzY29wZS5iaW5kTW9kZWx9fSkudGhlbihmdW5jdGlvbiAocmVzcG9uY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uY2UuZGF0YS51cmwgPSBzY29wZS5iaW5kTW9kZWw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFVwbG9hZERhdGEuc2V0KHJlc3BvbmNlLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL3VwbG9hZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
